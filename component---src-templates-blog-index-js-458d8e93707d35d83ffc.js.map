{"version":3,"file":"component---src-templates-blog-index-js-458d8e93707d35d83ffc.js","mappings":"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","sources":["webpack://varya.me/./src/templates/BlogIndex.js","webpack://varya.me/./src/templates/Page.js","webpack://varya.me/./node_modules/remove-markdown/index.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { graphql } from \"gatsby\";\nimport { GatsbyImage } from \"gatsby-plugin-image\";\nimport { ResponsiveContext } from \"grommet\";\nimport { Heading, Pagination, Widget, WidgetContainer } from \"@components\";\nimport { Page } from \"@templates/Page\";\n\nconst removeMd = require('remove-markdown');\n\nconst visiblePages = {\n  small: 2,\n  medium: 5,\n  large: 10,\n};\n\nconst HeroContent = () => (\n  <>\n    <Heading\n      level={1}\n      alignSelf=\"center\"\n      responsive\n      size=\"large\"\n      margin=\"small\"\n      color=\"brand\"\n    >\n      Blog\n    </Heading>\n  </>\n);\n\nconst Blog = ({ data, pageContext }) => {\n  const posts = data.posts.edges;\n  const { currentPage, pageCount } = pageContext;\n  return (\n    <ResponsiveContext.Consumer>\n      {(size) => (\n        <Page\n          hero={{\n            props: { background: \"transparent\", height: \"small\" },\n            content: HeroContent,\n          }}\n          seo={{\n            title: \"Blog - Varya Stepanova, design systems expert\",\n            description: `Read my articles and notes on design systems and development`,\n          }}\n        >\n          <WidgetContainer>\n            {posts.map((post) => {\n              const { cover, date, link } = post.node.frontmatter;\n              const { readingTime, slug } = post.node.fields;\n              const resolvedSlug = link ? link : `/${slug}`;\n              const match = post.node.body.match( new RegExp(`${'<div data-excerpt>'}([\\\\s\\\\S]*?)${'</div>'}`, 'i'))\n              const snippet = match && match[1] ? removeMd(match[1].trim()) : post.node.excerpt;\n              return (\n                <Widget\n                  key={post.node.frontmatter.title}\n                  imageSrc={\n                    cover && cover.childImageSharp.gatsbyImageData.images.fallback.src\n                  }\n                  title={post.node.frontmatter.title}\n                  slug={resolvedSlug}\n                  excerpt={snippet}\n                  height=\"small\"\n                  date={date}\n                  readingTime={\n                    parseInt(readingTime?.minutes) > 0 &&\n                    `${Math.round(readingTime.minutes)} min read`\n                  }\n                />\n              );\n            })}\n          </WidgetContainer>\n          <Pagination\n            currentPage={currentPage}\n            totalPages={pageCount}\n            size={size}\n            maxVisiblePages={visiblePages[size]}\n          />\n        </Page>\n      )}\n    </ResponsiveContext.Consumer>\n  );\n};\n\nBlog.propTypes = {\n  data: PropTypes.object,\n  pageContext: PropTypes.object,\n  currentPage: PropTypes.number,\n  pageCount: PropTypes.number,\n};\n\nexport default Blog;\n\nexport const blogQuery = graphql`\n  query BlogIndexQuery($skip: Int!, $limit: Int!) {\n    posts: allMdx(\n      filter: {\n        internal: { contentFilePath: { regex: \"//posts//\" } }\n        fields: { lang: { eq: \"en\" } }\n      }\n      sort: { frontmatter: { date: DESC } }\n      limit: $limit\n      skip: $skip\n    ) {\n      edges {\n        node {\n          body\n          excerpt(pruneLength: 600)\n          fields {\n            slug\n            readingTime {\n              minutes\n            }\n          }\n          frontmatter {\n            title\n            link\n            date(formatString: \"DD MMMM YYYY\")\n            cover {\n              childImageSharp {\n                gatsbyImageData(layout: FIXED)\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Box } from \"grommet\";\nimport { Hero } from \"@components\";\nimport { Layout } from \"@components\";\nimport { Seo } from \"@components\";\n\nexport const Page = (props) => {\n  const { children, hero, seo, location } = props;\n  const { props: heroProps, content } = { ...hero };\n  return (\n    <Layout location={location}>\n      {seo && <Seo {...seo} location={location} defer={false} />}\n      {hero && (\n        <Hero align=\"center\" justify=\"between\" {...heroProps}>\n          {React.createElement(content)}\n        </Hero>\n      )}\n      <Box width=\"xlarge\" margin={{ horizontal: \"auto\" }} pad=\"medium\">\n        {children}\n      </Box>\n    </Layout>\n  );\n};\n\nPage.propTypes = {\n  hero: PropTypes.shape({\n    props: PropTypes.object,\n    content: PropTypes.node,\n  }),\n  seo: PropTypes.shape({\n    title: PropTypes.string,\n    keywords: PropTypes.array,\n  }),\n  children: PropTypes.node,\n  location: PropTypes.object,\n};\n","module.exports = function(md, options) {\n  options = options || {};\n  options.listUnicodeChar = options.hasOwnProperty('listUnicodeChar') ? options.listUnicodeChar : false;\n  options.stripListLeaders = options.hasOwnProperty('stripListLeaders') ? options.stripListLeaders : true;\n  options.gfm = options.hasOwnProperty('gfm') ? options.gfm : true;\n  options.useImgAltText = options.hasOwnProperty('useImgAltText') ? options.useImgAltText : true;\n  options.abbr = options.hasOwnProperty('abbr') ? options.abbr : false;\n  options.replaceLinksWithURL = options.hasOwnProperty('replaceLinksWithURL') ? options.replaceLinksWithURL : false;\n  options.htmlTagsToSkip = options.hasOwnProperty('htmlTagsToSkip') ? options.htmlTagsToSkip : [];\n\n  var output = md || '';\n\n  // Remove horizontal rules (stripListHeaders conflict with this rule, which is why it has been moved to the top)\n  output = output.replace(/^(-\\s*?|\\*\\s*?|_\\s*?){3,}\\s*/gm, '');\n\n  try {\n    if (options.stripListLeaders) {\n      if (options.listUnicodeChar)\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, options.listUnicodeChar + ' $1');\n      else\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, '$1');\n    }\n    if (options.gfm) {\n      output = output\n      // Header\n        .replace(/\\n={2,}/g, '\\n')\n        // Fenced codeblocks\n        .replace(/~{3}.*\\n/g, '')\n        // Strikethrough\n        .replace(/~~/g, '')\n        // Fenced codeblocks\n        .replace(/`{3}.*\\n/g, '');\n    }\n    if (options.abbr) {\n      // Remove abbreviations\n      output = output.replace(/\\*\\[.*\\]:.*\\n/, '');\n    }\n    output = output\n    // Remove HTML tags\n      .replace(/<[^>]*>/g, '')\n\n    var htmlReplaceRegex = new RegExp('<[^>]*>', 'g');\n    if (options.htmlTagsToSkip.length > 0) {\n      // Using negative lookahead. Eg. (?!sup|sub) will not match 'sup' and 'sub' tags.\n      var joinedHtmlTagsToSkip = '(?!' + options.htmlTagsToSkip.join(\"|\") + ')';\n\n      // Adding the lookahead literal with the default regex for html. Eg./<(?!sup|sub)[^>]*>/ig\n      htmlReplaceRegex = new RegExp(\n          '<' +\n          joinedHtmlTagsToSkip +\n          '[^>]*>', \n          'ig'\n      );\n    }\n\n    output = output\n      // Remove HTML tags\n      .replace(htmlReplaceRegex, '')\n      // Remove setext-style headers\n      .replace(/^[=\\-]{2,}\\s*$/g, '')\n      // Remove footnotes?\n      .replace(/\\[\\^.+?\\](\\: .*?$)?/g, '')\n      .replace(/\\s{0,2}\\[.*?\\]: .*?$/g, '')\n      // Remove images\n      .replace(/\\!\\[(.*?)\\][\\[\\(].*?[\\]\\)]/g, options.useImgAltText ? '$1' : '')\n      // Remove inline links\n      .replace(/\\[([^\\]]*?)\\][\\[\\(].*?[\\]\\)]/g, options.replaceLinksWithURL ? '$2' : '$1')\n      // Remove blockquotes\n      .replace(/^\\s{0,3}>\\s?/gm, '')\n      // .replace(/(^|\\n)\\s{0,3}>\\s?/g, '\\n\\n')\n      // Remove reference-style links?\n      .replace(/^\\s{1,2}\\[(.*?)\\]: (\\S+)( \".*?\")?\\s*$/g, '')\n      // Remove atx-style headers\n      .replace(/^(\\n)?\\s{0,}#{1,6}\\s+| {0,}(\\n)?\\s{0,}#{0,} #{0,}(\\n)?\\s{0,}$/gm, '$1$2$3')\n      // Remove * emphasis\n      .replace(/([\\*]+)(\\S)(.*?\\S)??\\1/g, '$2$3')\n      // Remove _ emphasis. Unlike *, _ emphasis gets rendered only if \n      //   1. Either there is a whitespace character before opening _ and after closing _.\n      //   2. Or _ is at the start/end of the string.\n      .replace(/(^|\\W)([_]+)(\\S)(.*?\\S)??\\2($|\\W)/g, '$1$3$4$5')\n      // Remove code blocks\n      .replace(/(`{3,})(.*?)\\1/gm, '$2')\n      // Remove inline code\n      .replace(/`(.+?)`/g, '$1')\n      // // Replace two or more newlines with exactly two? Not entirely sure this belongs here...\n      // .replace(/\\n{2,}/g, '\\n\\n')\n      // // Remove newlines in a paragraph\n      // .replace(/(\\S+)\\n\\s*(\\S+)/g, '$1 $2')\n      // Replace strike through\n      .replace(/~(.*?)~/g, '$1');\n  } catch(e) {\n    console.error(e);\n    return md;\n  }\n  return output;\n};\n"],"names":["removeMd","require","visiblePages","small","medium","large","HeroContent","React","Heading","level","alignSelf","responsive","size","margin","color","_ref","data","pageContext","posts","edges","currentPage","pageCount","ResponsiveContext","Consumer","Page","hero","props","background","height","content","seo","title","description","WidgetContainer","map","post","cover","date","link","node","frontmatter","readingTime","slug","fields","resolvedSlug","match","body","RegExp","snippet","trim","excerpt","Widget","key","imageSrc","childImageSharp","gatsbyImageData","images","fallback","src","parseInt","minutes","Math","round","Pagination","totalPages","maxVisiblePages","children","location","heroProps","Layout","Seo","Object","assign","defer","Hero","align","justify","Box","width","horizontal","pad","module","exports","md","options","listUnicodeChar","hasOwnProperty","stripListLeaders","gfm","useImgAltText","abbr","replaceLinksWithURL","htmlTagsToSkip","output","replace","htmlReplaceRegex","length","joinedHtmlTagsToSkip","join","e","console","error"],"sourceRoot":""}