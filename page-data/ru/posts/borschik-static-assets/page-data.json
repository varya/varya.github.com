{"componentChunkName":"component---src-templates-post-js","path":"/ru/posts/borschik-static-assets/","result":{"data":{"mdx":{"id":"43dc3719-ee25-5078-b533-2d4ab6a3511f","body":"\nНа прошлой неделе мне понадобилось сделать сайт, статика которого раздаётся с\nдругого сервера. Это касалось всех статических файлов: как подключенных к HTML\nдокументу CSS и JavaScript, так и изображений и шрифтов, использованных уже в\nих коде.<excerpt/> Хотя очевидно, что все они эти ресурсы должны быть локальными во\nвремя разработки. То есть задача была придумать магию, которая знает, где будет\nразмещена статика, и преобразовывает относительные пути в коде в абсолютные\nсогласно этому знанию.\n\nЭту задачу я решила при помощи инструмента\n[Borschik](http://bem.info/tools/optimizers/borschik/). Борщик-сборщик, всем\nдолжно быть понятно. :-)\n\n<center>\n<iframe src=\"//embed.gettyimages.com/embed/135591409?et=B_T3l-shrE-pr9-ELe_wJw&sig=5haG67PAzCxGourA96ZB7m9LwSket1v9PpvXEXNIkBM=\" width=\"508\" height=\"407\" frameborder=\"0\" scrolling=\"no\"></iframe>\n</center>\n\nДемо-проект с этим решением находится в репозитории\n[varya/st-deliverer](https://github.com/varya/st-deliverer)\n\n### Структура проекта\n\nКак вы позже увидите, `borschik` можно гибко настроить. Так что возможна любая\nструктура проекта. В моём проекте все хранится в директории\n[src](b.com/varya/st-deliverer/tree/master/src).\nПосле сборки получается HTML-файлы в папке\n[dist/html](https://github.com/varya/st-deliverer/tree/gh-pages/dist/html).\nПроверьте его код, и вы убедитесь, что статические файлы подключены с другого\nхоста по абсолютному пути.\n\n```html\n<html>\n  <head>\n    <title>Deliver static assets with Borschik</title>\n    <link rel=\"stylesheet\" href=\"http://varya.github.io/stor.../styles.css\" />\n  </head>\n  <body class=\"page\" background=\"http://varya.github.io/stor.../grungy.jpg\">\n    ...\n  </body>\n</html>\n```\n\nСтраничку можно [открыть в браузере](http://varya.me/st-deliverer/dist/html/) и\nнасладиться моим дизайном и прекрасным котиком.\n\n### Borschik в вашем проекте\n\nBorschik — это npm-пакет. Его можно установить глобально при помощи команды\n\n```bash\nnpm install -g borschik\n```\n\nНо лично я предпочитаю локальные зависимости, так что завожу в корне проекта\nфайл\n[package.json](https://github.com/varya/st-deliverer/blob/master/package.json):\n\n```js\n{\n  ...\n  \"dependencies\": {\n    \"borschik\": \"0.4.2\"\n  },\n  ...\n}\n```\n\n### Настройка\n\nПрежде чем начинать преобразования, нужно проинструктировать `borschik`, что\nпреобразовывать и как. Для этого нужен конфигурационный файл\n[.borschik](https://github.com/varya/st-deliverer/blob/master/.borschik):\n\n```js\n{\n  \"paths\" : {\n    \"src/img/\": \"http://varya.github.io/stor.../st-deliverer/img/\",\n    \"src/css/\": \"http://varya.github.io/stor.../st-deliverer/css/\",\n    \"src/font/\": \"http://varya.github.io/storage/fonts/\"\n\n  }\n}\n```\n\nЗаметьте, для разных путей можно настроить разную замену. Здесь это видно на\nпримере с фонами.\n\n### Запускаем!\n\nЗапустите `borschik` над файлом, содержащим ссылки на локальные статические\nресурсы, и вы получите результат преобразования. Например,\n\n```bash\n./node_modules/borschik/bin/borschik \\\n  --input=src/css/styles.css\n```\n\nЧтобы использовать это в сборке, понадобится ещё один флаг `--output`,\nсообщающий куда записать получившееся.\n\n`borschik` знаком с синтаксисом web-технологий. То есть \"ссылки\" размещенные в\nпростом тексте останутся нетронутыми.\n\n### Система сборки\n\nТеперь `borschik` можно включить в систему сборки проекта. В моём случае это\nнебольшой\n[Makefile](https://github.com/varya/st-deliverer/blob/master/Makefile), спасибо\n[@alexeyten](https://github.com/alexeyten) за 90% его содержания. :-) Но есть\nтакже и плагин для grunt [megatolya/grunt-borschik](https://github.com/megatolya/grunt-borschik).<br/>\nКонечно, `borschik` включен в системы сборки БЭМ-проектов\n[bem-tools](http://bem.info/tools/bem/bem-tools/)\nи [enb](https://github.com/enb-make/enb)\n\n### Результат\n\nДля закрепления [проведайте котика ещё раз](http://varya.me/st-deliverer/dist/html/).\n\nА узнать о многих других возможностях `borschik` можно из статьи\n[http://ru.bem.info/articles/borschik/](http://ru.bem.info/articles/borschik/).\n","fields":{"slug":"ru/posts/borschik-static-assets/","disqusIdentifier":"ru-issues-borschik-static-assets","readingTime":{"minutes":1.945}},"frontmatter":{"title":"Локальная разработка и удаленный хостинг статики","subTitle":null,"date":"12 March 2014","v2":null,"old":true,"tumblr":null,"tags":null,"meta":null,"canonical":null,"cover":null}},"site":{"siteMetadata":{"siteUrl":"https://varya.me"}}},"pageContext":{"slug":"ru/posts/borschik-static-assets/"}},"staticQueryHashes":[],"slicesMap":{}}