{"componentChunkName":"component---src-templates-post-js-content-file-path-home-runner-work-varya-github-com-varya-github-com-content-posts-jscs-in-use-index-en-md","path":"/en/posts/jscs-in-use/","result":{"data":{"mdx":{"id":"7c97cc71-11ca-5b2f-9a39-6bfb9ef539ed","body":"\n<div data-excerpt>\n\nThis time I would like to share my experience of keeping a codestyle in one of my working projects. This is about a new\ntool called **JSCS** which we have recently chosen with the team and now are very pleased with the result.\n\n</div>\n\nOnce I joined [SC5 Styleguide](http://styleguide.sc5.io/) project, I discovered that it was not consistent enough from\nits codestyle perspective. It was not frightening by that time, but it was already clear that the project was going to\ngrow fast and the sooner we start bothering about keeping the codestyle the better. I was already aware about JSCS and\nits features because had published [a translation of author's tool\nintroduction](http://frontendbabel.info/articles/jscs-javascript-code-style/) in one of my side-projects. So the\ndecision which tool to use was made quickly.\n\nThere are indeed many other solutions, such as JSLint and JSHint, the most mentioned once. But let me first tell you a\nstory.\n\nInteresting enough that JSHint authors liked JSCS so much that they prefered to contribute into it rather than develop\nstyle checkings in their tool. So they removed all the style enforcement rules out of JSHint and keep it now for\nmore complex things not about coding style but about programming patterns.\n\n<blockquote class=\"twitter-tweet\" lang=\"en\"><p>And with that, JSCS now has all the style enforcement rules that are\nbeing dropped in <a href=\"https://twitter.com/JSHint\">@JSHint</a> 3.0: <a\nhref=\"https://t.co/W98EMSiTN5\">https://t.co/W98EMSiTN5</a> cc <a\nhref=\"https://twitter.com/valueof\">@valueof</a></p>&mdash; Mike Sherov (@mikesherov) <a\nhref=\"https://twitter.com/mikesherov/status/419596672520318976\">4 Jan 2014</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\nThis means that there is no question if you choose JSLint, JSHint **or** JSCS. Currently you can choose between\nJSLint and JSHint + JSCS working together.\n\n```js\ngulp.task(\"jslint\", [\"jshint\", \"jscs\"]);\n```\n\nAssuming that JSCS is a new tool with not yet spoiled structure, I suppose that it would be a pleasure to contribute\ninto it. Also, the tool's youth promises that future possible bugs would be fixed soon as there is no legacy.\n\nMoreover, I personally find encouraging that JSCS has been already chosen by such respectable teams as jQuery, Bootsrap\nand AngularJS.\n\nLong story short, JSCS is an npm package. You can install it either globally or locally for a particular project:\n\n```\nnpm install jscs\n```\n\nBesides, you will need a configuration file `.jscsrc` and define what kind of JavaScript style you prefer for the\nproject. This file should be put into the root of your project.\n\nJSCS support tonns of rules. Nethertheless, your config file would not be too heavy thanks to presets. In most cases we\nchoose from popular JavaScript styles and so there is no need to define the rules over and over again. You only need to\nwrite who you prefer to look like:\n\n- airbnb\n- crockford\n- google\n- jquery\n- mdcs\n- wikimedia\n- yandex\n\nEven if you want to be special, you still can choose the most similar preset and redefine some of its rules below.\n\nImportant thing is that JSCS is already quite a mature thing, which means that you can easily find acompanying packages\nand needed plug-ins for editors.\n\n## The Success Story\n\nAssuming these facts, we decided to give JSCS a try. We started with defining a lovely configuration but excluded all\nthe files from the checking process yet. Our project already had modular structure, so this was easy.\n\n```\n{\n    ...\n\n    \"excludeFiles\": [\n      \"node_modules/**\",\n      \"src/modules/a/**\",\n      \"src/modules/b/**\",\n      \"src/*.js\n    ]\n}\n```\n\nThen, we agreed that if any of us starts coding or changing a module, he/she will fix the codestyle and swipe out the\nfixed module from the `excludeFiles` list. Following this, we got our files fixed quite fast and even avoid conflicts.\n\nKeeping the codestyle when maintaining these files lately turned out to be more challengeable. Automatic checkings are\nvery helpful here, but we needed to decide how strict we should be. The codestyle should not be our main goal instead of\ndevelopment.\n\nFinally we came up with \"separation of concerns\" model. Thus, for the upstream repository we have strict codestyle\npolicy, and for the forks it is more suggestive. We taught Travis to check codestyle in the pull requests we are\ngetting. If codestyle is broken, the Travis build fails. So, pull requests with wrong codestyle cannot be merged into\nthe upstream. This ensures us that we will never get bad code there. However for the forks it is not that strict. We\nturned down the idea of using pre-push hooks but recommend a developer to install a pre-commit hook in their repository\nclone as well as using JSCS IDE plugins in order to learn about wrong codestyle while developing and not when their pull\nrequest gets broken. These recommendations are described in our documentation for developers and all the team members\nfollow them.\n\nEveryone especially likes that JSCS can work with the code editors. The codestyle configuration is stored in the project\nrepository and so an editor reads on its own. The most wonderful thing is that when switching between the projects with\ndifferent codestyles, it does not require any change of settings.\n\n![](http://varya.me/jscs-talk/pictures/sublime.gif)\n\nAnd of course it is always possible to check the codestyle manually running a gulp task.\n\n![](http://varya.me/jscs-talk/pictures/travis.png)\n\n## Word of caution\n\nWe faced a couple of problems when applying the tool. I believe they are worth to be mentioned, especially as I can\nprovide the solutions.\n\nThe most painful was \"out of memory\" error when running a gulp task with JSCS checking. Turned out, that excluding files\nin the configuration is not enough. Gulp tries to process all the files that match the mask and is soon run out of\nmemory. We fixed this with using `gulp-ingnore` package:\n\n```\ngulp.task('jscs', function() {\n  return gulp.src([\n    '**/*.js'\n  ])\n  .pipe(gulpIgnore.exclude([\n    'node_modules/**',\n    'demo-output/**'\n  ]))\n  .pipe(jscs());\n})\n```\n\nThis is not the best solution because we need to list the excluded files in both `.jscs` configuration and the\n`gulpfile.js`. But there is nothing better yet.\n\nThe second trick is about checking the codestyle while watching the project files with Gulp. You would probably like to\nsee the errors reported in your terminal but still have the `watch` task running. This is possible with the help of\n`gulp-plumber`:\n\n```\ngulp.task('jscs', function() {\n  return gulp.src([\n    '**/*.js'\n  ])\n  ...\n  .pipe(plumber())\n  .pipe(jscs());\n});\n```\n\nThis is all, we did not face any other problem with the tool. It works just fine and has already saved thousands of\nman-hours.\n\n## Besides\n\nIf you are interested in the slides for this talk, here they are\n[http://varya.me/jscs-talk/](http://varya.me/jscs-talk/).\n","fields":{"slug":"en/posts/jscs-in-use/","disqusIdentifier":"posts-jscs-in-use-index-en","readingTime":{"minutes":5.325}},"frontmatter":{"title":"JSCS in use","subTitle":null,"date":"11 February 2015","v2":true,"old":null,"tumblr":null,"tags":null,"meta":null,"canonical":null,"cover":null}},"site":{"siteMetadata":{"siteUrl":"https://varya.me"}}},"pageContext":{"slug":"en/posts/jscs-in-use/","prev":{"id":"8c4c03e4-02d8-5818-9399-d9bbadf31f02","fields":{"slug":"en/posts/run-app-in-time-on-mac/","disqusIdentifier":"posts-run-app-in-time-on-mac-index-en","level":1,"fileRelativePath":"run-app-in-time-on-mac/index_en.md","lang":"en","readingTime":{"minutes":2.155}},"frontmatter":{"title":"Run on time (about Mac applications)","subTitle":null,"link":null,"v2":true,"old":null,"date":"2014-09-12T00:00:00.000Z","layout":"post","tags":null},"internal":{"contentFilePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/run-app-in-time-on-mac/index_en.md"}},"next":{"id":"fc97fdb5-b28c-5e40-a8b8-72235671c46e","fields":{"slug":"blog/bem-faq/","disqusIdentifier":"blog-bem-faq","level":1,"fileRelativePath":"bem-faq/index.md","lang":"en","readingTime":{"minutes":0.185}},"frontmatter":{"title":"Automating Style-Guide-Driven Development","subTitle":null,"link":null,"v2":null,"old":null,"date":"2015-03-05T00:00:00.000Z","layout":null,"tags":null},"internal":{"contentFilePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/bem-faq/index.md"}},"fileSourceUrl":"https://github.com/varya/varya.github.com/edit/develop/content/posts/jscs-in-use/index_en.md","frontmatter":{"title":"JSCS in use","date":"2015-02-11T00:00:00.000Z","v2":true,"layout":"post"}}},"staticQueryHashes":[],"slicesMap":{}}