{"componentChunkName":"component---src-templates-post-js-content-file-path-home-runner-work-varya-github-com-varya-github-com-content-posts-webfonts-with-sass-and-webpack-index-md","path":"/blog/webfonts-with-sass-and-webpack/","result":{"data":{"mdx":{"id":"1bb16b91-b2b7-5de5-9c04-e09da3b0cfda","body":"\n<div data-excerpt>\n\nLinking web fonts in SASS when using Webpack might not work as expected. The most common problem is incorrect URL resolving if a font is linked with `url()`. This post covers this and the following traps on your way to nice fonts on your webpage.\n\n</div>\n\n<div class=\"small\" markdown=\"1\">\n\n<Image caption=\"Image source: https://processtypefoundry.com/blog/2011/02/five-new-webfonts/\">\n![](thumb.png)\n</Image>\n\n</div>\n\n## Load fonts\n\nInstruct your webpack how to load font with `file-loader`:\n\n```javascript\n{\n    test: /\\.(ttf|eot|woff|woff2|svg)$/,\n    use: {\n        loader: 'file-loader',\n        options: {\n            name: '[name].[ext]',\n            outputPath: 'fonts/'\n        },\n    },\n},\n```\n\nMore info about loading fonts options on [SurviveJs project](https://survivejs.com/webpack/loading/fonts/).\n\n## Resolve URLs\n\nIf you use SASS, you must face a problem of resolving URLs. Let's say your Webpack configuration for processing SASS files is like the following.\n\n```javascript\n{\n    test: /\\.scss$/,\n    loaders: [\n        'style-loader',\n        'css-loader',\n        'sass-loader',\n    ]\n},\n```\n\nEverything looks normal but you still get the following error for every single SASS file.\n\n```bash\nERROR in ./src/styles.scss (./node_modules/css-loader/dist/cjs.js??ref--5-1!./node_modules/resolve-url-loader!./node_modules/sass-loader/dist/cjs.js??ref--5-3!./src/styles.scss)\nModule not found: Error: Can't resolve './open-sans-v10-latin-regular.woff' in '/Users/varya/WebDev/my-pet-project'\n    @ ./src/styles.scss (./node_modules/css-loader/dist/cjs.js??ref--5-1!./node_modules/resolve-url-loader!./node_modules/sass-loader/dist/cjs.js??ref--5-3!./src/styles.scss) 19:42-87\n```\n\nIn this case, you need to add `resolve-url-loader` because SASS itself does not do url rewriting.\n\n```javascript\n{\n    test: /\\.scss$/,\n    loaders: [\n        'style-loader',\n        'css-loader',\n        'resolve-url-loader', // add this before sass-loader\n        'sass-loader',\n    ]\n},\n```\n\nFor more information, you can check [Problems with url(...)](https://webpack.js.org/loaders/sass-loader/#problems-with-url) in Webpack official documentation.\n\n## SVG, I caught you!\n\nNote that the above configuration also applies to SVG files. You may have other SVG files that you do not want to process as fonts. In this case, do not forget to use `include` and `exclude` options.\n\nFor the fonts, include only the files from a directory where you keep fonts:\n\n```javascript\n{\n    test: /\\.(ttf|eot|woff|woff2|svg)$/,\n    use: {\n        loader: 'file-loader',\n        include: path.resolve(__dirname, './src/webfonts'),\n        options: {\n            name: '[name].[ext]',\n            outputPath: 'fonts/'\n        },\n    },\n},\n```\n\nFor SVG illustrations, exclude the font folder:\n\n```javascript\n{\n    test: /\\.svg$/,\n    exclude: path.resolve(__dirname, './src/webfonts'),\n    use: ['@svgr/webpack'],\n},\n```\n\n## Production: resolve URLs\n\nNow everything works in the development environment, but with production webpack configuration you must get the familiar error for every single SASS file.\n\n```bash\nERROR in ./src/styles.scss (./node_modules/css-loader/dist/cjs.js??ref--5-1!./node_modules/resolve-url-loader!./node_modules/sass-loader/dist/cjs.js??ref--5-3!./src/styles.scss)\nModule not found: Error: Can't resolve './open-sans-v10-latin-regular.woff' in '/Users/varya/WebDev/my-pet-project'\n    @ ./src/styles.scss (./node_modules/css-loader/dist/cjs.js??ref--5-1!./node_modules/resolve-url-loader!./node_modules/sass-loader/dist/cjs.js??ref--5-3!./src/styles.scss) 19:42-87\n```\n\nFor production mode, you need to add `devtool: 'source-map'` to the root of your Webpack configuration. This is for the `resolve-url-loader` to work correctly also when building for production.\n\n## Turn off ES modules\n\nBy default, file-loader generates JS modules that use the ES modules syntax. But in the fonts case it would give you `src: url([object Module]);`. To avoid it, use `esModule: false,`\n\n```javascript\n{\n    test: /\\.(ttf|eot|woff|woff2|svg)$/,\n    use: {\n        loader: 'file-loader',\n        include: path.resolve(__dirname, './src/webfonts'),\n        options: {\n            name: '[name].[ext]',\n            outputPath: 'fonts/',\n            esModule: false,\n        },\n    },\n},\n```\n\n![](./enjoy.png)\n","fields":{"slug":"blog/webfonts-with-sass-and-webpack/","disqusIdentifier":"blog-webfonts-with-sass-and-webpack","readingTime":{"minutes":2.235}},"frontmatter":{"title":"Using web fonts with SASS and Webpack","subTitle":null,"date":"12 May 2020","v2":null,"old":null,"tumblr":null,"tags":"webpack","meta":{"desc":"Full instruction on Webpack configuration for fonts with SASS as a CSS solution, for both development and production mode.\n"},"canonical":null,"cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/8b7fb31084ad1663709e418f8b101db6/756d4/thumb.png","srcSet":"/static/8b7fb31084ad1663709e418f8b101db6/756d4/thumb.png 585w","sizes":"585px"},"sources":[{"srcSet":"/static/8b7fb31084ad1663709e418f8b101db6/60e92/thumb.webp 585w","type":"image/webp","sizes":"585px"}]},"width":585,"height":217}}}}},"site":{"siteMetadata":{"siteUrl":"https://varya.me"}}},"pageContext":{"slug":"blog/webfonts-with-sass-and-webpack/","prev":{"id":"34050870-b465-5621-a0d5-a391663f74ea","fields":{"slug":"blog/design-system-remote-work/","disqusIdentifier":"blog-design-system-remote-work","level":1,"fileRelativePath":"design-system-remote-work/index.md","lang":"en","readingTime":{"minutes":6.77}},"frontmatter":{"title":"Remote work in a design system team","subTitle":null,"link":null,"v2":null,"old":null,"date":"2020-04-30T00:00:00.000Z","layout":"post","tags":null},"internal":{"contentFilePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/design-system-remote-work/index.md"}},"next":{"id":"3d8bf7cc-35c1-5e06-b597-68c7a8742740","fields":{"slug":"blog/flatten-array-with-reduce/","disqusIdentifier":"blog-flatten-array-with-reduce","level":1,"fileRelativePath":"flatten-array-with-reduce/index.md","lang":"en","readingTime":{"minutes":2.385}},"frontmatter":{"title":"Flatten array with JavaScript reduce function","subTitle":null,"link":null,"v2":null,"old":null,"date":"2020-06-01T00:00:00.000Z","layout":"post","tags":null},"internal":{"contentFilePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/flatten-array-with-reduce/index.md"}},"fileSourceUrl":"https://github.com/varya/varya.github.com/edit/develop/content/posts/webfonts-with-sass-and-webpack/index.md","frontmatter":{"title":"Using web fonts with SASS and Webpack","date":"2020-05-12T00:00:00.000Z","cover":"thumb.png","layout":"post","tags":"webpack","meta":{"desc":"Full instruction on Webpack configuration for fonts with SASS as a CSS solution, for both development and production mode.\n"}}}},"staticQueryHashes":[],"slicesMap":{}}