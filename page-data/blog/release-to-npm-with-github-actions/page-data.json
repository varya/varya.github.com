{"componentChunkName":"component---src-templates-post-js","path":"/blog/release-to-npm-with-github-actions/","result":{"data":{"mdx":{"id":"f44fd5a8-c973-5c86-8077-b252f4dbc96e","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Automatic releases of npm packages with GitHub actions\",\n  \"date\": \"2020-08-17T00:00:00.000Z\",\n  \"cover\": \"thumb.png\",\n  \"layout\": \"post\",\n  \"meta\": {\n    \"desc\": \"How to tune GitHub workflows for automatic releases of an npm package. The npm publish can be run on every change to the master branch keeping your npm package up-to-date with its repository.\\n\"\n  }\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"div\", {\n    \"data-excerpt\": true\n  }, mdx(\"p\", null, \"Recently I implemented a new cool feature to one of the npm packages I develop. Later this day, I was\\nshowing it to a friend, and ... nothing worked. What a shame, I forgot to publish the package. The\\nfeature successfully passed the tests, and was pushed to the package GitHub repository but no one could not\\nenjoy it anyway. Is there anything to help to avoid such situations? Yes, it is \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/features/actions\"\n  }, \"GitHub Actions\"), \" \\u2014 automated workflows that can run different jobs, including publishing packages to npm.\")), mdx(\"p\", null, \"Setting up a workflow is surprisingly simple: you only need to create a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".yml\"), \" file in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".github/workflows\"), \" folder. A file could\\nhave any name as there can be more than one workflow.\"), mdx(\"p\", null, \"Here is the content of my \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".github/workflow/gatsby-theme-npm-publish.yml\")), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"yml\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-yml\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yml\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"name\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" Gatsby theme npm package\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"on\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"push\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"branches\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \" master\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"jobs\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"publish-npm\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"runs-on\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" ubuntu\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \"latest\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"env\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"working-directory\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" ./gatsby\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \"theme\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"steps\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"uses\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" actions/checkout@v2\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"uses\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" actions/setup\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \"node@v1\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"with\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n          \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"node-version\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"12\"), \"\\n          \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"registry-url\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" https\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"//registry.npmjs.org/\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"run\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" npm install \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \"g yarn\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"name\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" install packages\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"run\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" yarn\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"working-directory\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" $\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"env.working\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \"directory\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"name\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" publish\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"run\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" npm publish\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"working-directory\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" $\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"env.working\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"-\"), \"directory\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"env\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \"\\n          \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token key atrule\"\n  }, \"NODE_AUTH_TOKEN\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" $\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"secrets.npm_token\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"As you can see, the jobs run on every push to the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"master\"), \" branch. There are a couple of special details in this workflow.\"), mdx(\"p\", null, \"Note that the package build is made not in the root directory but in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"gatsby-theme\"), \" directory. This repository hosts several packages, this is why. To run the commands in the correct context, I had to specify the directory. For that, I first define the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"working-directory\"), \" variable in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"env\"), \" section of the job and later use it az \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"${{env.working-directory}}\"), \".\"), mdx(\"p\", null, \"Another detail is providing an authorization token for npm. Such tokens are to generate on the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/\"\n  }, \"https://www.npmjs.com/\"), \" website:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1578px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/9d048328104f45a7f427c13ad3e3a7d9/098c1/npm-token1.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"62.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrElEQVQoz4VSSW7cMBDUSxLk5EPe5UM+5rwgQDAI4BjIHxLZM5iJREkjaqO4inuakhVfbLjQIBpkV7OXyhynz8ao3c1xpqYJHU9D1eCi6soaF3X7tx7rnuK5OddjNVjuMx+ij6+YC0FbY70z1jrvp5n8zv/kj/m1vY4zJYzHGDP6Nthq00Qg7uvd3acPHz/f3Nzefvnx/duvh4dEXl6D1vq/r5RyzpVFcTgcft7fPx2PlPGJMGNshjFumqZt22EYEEKXy+V8Pp9OJ7iEFGaHWhbGuRAirgjeQ/rMvQ2/I4QgpYRv5nlOzBC2gCy+hxDSCcV3XVdV1fb5lvF98gYoe+j7DmNr7QvZLAY2skVApVJAL0Ypo7XbLpfUsGa4vT49tnk+1yhK7p1L5AkR2jIrrTMRBFIVbOx1g8SAldXBuNBz1fSElmWPyqGpO1TaDju9QDfZpolgg0sGLUYlYVEGHO9AKrtmYDPtdUGlQqWskF1W8jrWZwvrcIzRXHBIIBOEFAJ2Dd5MCBlHAzRr97JBQROBJcMTjGHbBMhEqUSG2cKZpAJkAKWbWmFsEPYP1LzkbcgkfqkAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"npm token1\",\n    \"title\": \"npm token1\",\n    \"src\": \"/static/9d048328104f45a7f427c13ad3e3a7d9/098c1/npm-token1.png\",\n    \"srcSet\": [\"/static/9d048328104f45a7f427c13ad3e3a7d9/e17e5/npm-token1.png 400w\", \"/static/9d048328104f45a7f427c13ad3e3a7d9/5a190/npm-token1.png 800w\", \"/static/9d048328104f45a7f427c13ad3e3a7d9/098c1/npm-token1.png 1578w\"],\n    \"sizes\": \"(max-width: 1578px) 100vw, 1578px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Click on the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create new token\"), \" button.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1600px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/715d234d8cb5019184d261fde14fdd16/60708/npm-token2.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"40%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABX0lEQVQY01VNXU/CQBDs/5ACIsUXiEYhxgf/mOFPGVJQklZSaSUhSqJJtb71gSaF9mivvbt+0NalBKKTyd3u7M4OJ1R5oca3Sgp8Bdiq8ne9bq/d7nbavU7n5uLy9ur6vFY/O6k0+VqTrwv8qcA3mpUG96GO3yejN1lcPA91VdKnkv4i/bwqhqZ8a8qXquiq8qlMFrI8Gz1q4lgTJXUgz4bT+dOcQ56PNl5RIsuLNMuB26IAZn+Yg5LBXzjIve/3B+JDGCBug5DveVHEGKPwhEFAKU2T5B/TNKE0xphhTBCyTBOt7JhRzrKs5XIJ1qg8sF6vwQwJeZ4f312RJltKKPaTwC+SKKcEFM40TcMwgiAAcxzHnueBeX8LsG8BjuNEjMZ7PUkI2Ymc67q2bYckjGDCGCwhhIIDYOr7PsZ4tVpBcZBBwLDMgRPCwUMZgWSYEEKiA6BlJcAJUUcdFFj+BQsNjX7uiEueAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"npm token2\",\n    \"title\": \"npm token2\",\n    \"src\": \"/static/715d234d8cb5019184d261fde14fdd16/29007/npm-token2.png\",\n    \"srcSet\": [\"/static/715d234d8cb5019184d261fde14fdd16/e17e5/npm-token2.png 400w\", \"/static/715d234d8cb5019184d261fde14fdd16/5a190/npm-token2.png 800w\", \"/static/715d234d8cb5019184d261fde14fdd16/29007/npm-token2.png 1600w\", \"/static/715d234d8cb5019184d261fde14fdd16/97a96/npm-token2.png 2400w\", \"/static/715d234d8cb5019184d261fde14fdd16/60708/npm-token2.png 2872w\"],\n    \"sizes\": \"(max-width: 1600px) 100vw, 1600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"And choose to create a token with the right to publish.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1262px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8ebf6d8f9e2ff8d72b844c02f5d1fa4a/62da8/npm-token3.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"82%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVQoz42S7W6CMBiFvcptP82y7XJwdzZBUSJLzBY/gPJRS4tQhe1AJ4LA4vOjoaWn531POzp2SJLkVCFP8lxxHGDUVWZSrlYr0zQty5p+TM35nHNxl1gIURTFuzZ5Ho+fHh7fXl4nmuY4jpQS5w6KkwvQx4yt12uYU0rjOMbKoDMEaZri7CxDySVoGK2iBIxqvUldQinmnGOTEuAfPvI8hxLjTx+oRelLMSbYutludV23bdswjP1+j01YHBJfnTGBCTscfEKCIBgyHBafzzEXxA8pjbgQKqG0A5pCObdl50VO/ehTX3zN9O/lYrNchLvdgaGaK0ieMdYjRlRpevQD33XdkJDKO6lGwS8oTY9YJfwX8uWGFHmbfnH5mBtEUUQq1BNQ9PcMK3U3NXW2RZvbtNEPHDzPI/eB8FpvuxnM/zTf+S93GJGbkpOZIgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"npm token3\",\n    \"title\": \"npm token3\",\n    \"src\": \"/static/8ebf6d8f9e2ff8d72b844c02f5d1fa4a/62da8/npm-token3.png\",\n    \"srcSet\": [\"/static/8ebf6d8f9e2ff8d72b844c02f5d1fa4a/e17e5/npm-token3.png 400w\", \"/static/8ebf6d8f9e2ff8d72b844c02f5d1fa4a/5a190/npm-token3.png 800w\", \"/static/8ebf6d8f9e2ff8d72b844c02f5d1fa4a/62da8/npm-token3.png 1262w\"],\n    \"sizes\": \"(max-width: 1262px) 100vw, 1262px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Copy the token you got into the clipboard.\"), mdx(\"p\", null, \"After that, you need to add this token to the secrets of your repository. Go to the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Settings\"), \" tab of the repository:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1600px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/9dfbb88f3cd0684018550bca2261b277/88820/github-token1.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVQoz4WRyW4bMQyG/XDZEydIGg/iLIAPecECfYYipzxALw2KAvFs2ql95P4ztuFTEYIjiJQ+kfNz9rR6rR5X1dPqdrG8q5bfqsfFw/PdYlktX+4fnq9vF8fn85OLG/jpJdbr47P56Ofzo7OrWdOrj0/xt5ZtL6TSShuhNDZCYjVwbUjBpVSMW3JMSMY5F6rt2SyFEJyLMaaUDVGIMUyB9x6ZMAbReu8YE83aKl42B5vhyykxLq3zhhxZDwBJXCplXJUeKxtjf/56+/7+o+WdJZszoDTCwD4bVjPdct0JUi4bP8ApFgpF2sSU4ybUOFUAHRcCFeAjHPOmYUZrNQwDQud82/WMC3ReYPsmnff4fxQEeGgb8LoVRGbKFMCMcahiDI1x2b0AmMhqTXXThZh28FAK1JNSbi95H6A2dESRsje8gUbI2pCyJp/ysIeHQSmIQtt7kBc1rcUIDvCUxwiC1mZdN34SdVI756ZtMZ7NVzY+kYqiYOweRqrr+t2E/m9bOVlX//n4je6w/wcTO1eqhPnaAQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"github token1\",\n    \"title\": \"github token1\",\n    \"src\": \"/static/9dfbb88f3cd0684018550bca2261b277/29007/github-token1.png\",\n    \"srcSet\": [\"/static/9dfbb88f3cd0684018550bca2261b277/e17e5/github-token1.png 400w\", \"/static/9dfbb88f3cd0684018550bca2261b277/5a190/github-token1.png 800w\", \"/static/9dfbb88f3cd0684018550bca2261b277/29007/github-token1.png 1600w\", \"/static/9dfbb88f3cd0684018550bca2261b277/97a96/github-token1.png 2400w\", \"/static/9dfbb88f3cd0684018550bca2261b277/88820/github-token1.png 2564w\"],\n    \"sizes\": \"(max-width: 1600px) 100vw, 1600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Find the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Secrets\"), \" page in the sidebar.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1600px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/7518c575ca7f01d888fe2ead613a51ad/69d6b/github-token2.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"59.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABf0lEQVQoz3VRCY7UMBDM/98Hu8sKiUEj4sS3E8e3HcrOMBohaFU6brvP6mmzYZaR6gCY3aVcajtTKfiXUqFra/nFxHO/PE/oybqwcqM2twqzWyeVFlL7kLbd7vYAuFTOR5gauX1Qett3S5bFHm5ClpxQqeSccA4heh9QyocA15hSN3OJMYUYcYBDDN5qDb/p7NKMks6580XsccyEhBDO/8sVfBpjGGPHcTwfdmtXSrXZMHQdguJosJdqrX+tPYIp42SlmCemDM7AChoRUmEwtAnOkEJpgxH+URk8SWXAc35SmjOllBCCjrz3yBUjxvSDi4dMbQQrpShjta+gXSilpVRHm8NuZ+3N/sG4nfpxzMwpHcGX8+kOwenHZn7muP6NsEZPgNF2ivx2E/d74Ry7etTJKhyfRn2T7Ktgb4AWH1K8cfpF8ncl3qFHcM5ynr3RKFdzbqMXqbbvt18/7mQmdFk65nkB/9CM8cvnQVi9rBdxsYgtATH1x2tbY0HtefgNRoG3F0XHM5wAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"github token2\",\n    \"title\": \"github token2\",\n    \"src\": \"/static/7518c575ca7f01d888fe2ead613a51ad/29007/github-token2.png\",\n    \"srcSet\": [\"/static/7518c575ca7f01d888fe2ead613a51ad/e17e5/github-token2.png 400w\", \"/static/7518c575ca7f01d888fe2ead613a51ad/5a190/github-token2.png 800w\", \"/static/7518c575ca7f01d888fe2ead613a51ad/29007/github-token2.png 1600w\", \"/static/7518c575ca7f01d888fe2ead613a51ad/69d6b/github-token2.png 1912w\"],\n    \"sizes\": \"(max-width: 1600px) 100vw, 1600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Create a new secret.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1600px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8b362601609e0e5ab1094606f75ca92f/912fc/github-token3.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"39.25%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA90lEQVQY041R7W7EIAzj/R/z2u50XQskgdLw0c3QkyZN+zHLCo1kiOMaYiair3/jEgnbRs9nITK46ZyvtYGl1Lv+Yh1Vcz41KxFvG1hjMOu6LsvHPC/TND+m6TEDy26td95a5713jjwJS4BHay2ziPeYABeGmZ13dkhcF3vqELiDDAwx8dFqu962r+uuOA1LfK375+4kJi3tzHWwdGrRXLUbLknzcYIK0aFoS23NJD2tWBBNa9cPx9vHkWAY009VTMT6jjh1M9InI6lcc66lDeDG/cYNqHMuQGtvt3mkWu+dY4w9A+RBI4uxLz5o9CFEFg4h/PnbvgELVM/UiP2+JAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"github token3\",\n    \"title\": \"github token3\",\n    \"src\": \"/static/8b362601609e0e5ab1094606f75ca92f/29007/github-token3.png\",\n    \"srcSet\": [\"/static/8b362601609e0e5ab1094606f75ca92f/e17e5/github-token3.png 400w\", \"/static/8b362601609e0e5ab1094606f75ca92f/5a190/github-token3.png 800w\", \"/static/8b362601609e0e5ab1094606f75ca92f/29007/github-token3.png 1600w\", \"/static/8b362601609e0e5ab1094606f75ca92f/912fc/github-token3.png 1934w\"],\n    \"sizes\": \"(max-width: 1600px) 100vw, 1600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Put the npm token which you have in the clipboard to the texarea and give it a name, say \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm_token\"), \".\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1600px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8cfceb98b796c3de9e190df137eb9c1e/7970d/github-token4.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVQoz5WSy07DQAxF5/+/BlX8CIQFlEWL1ASxyDTxPOz4MUOjIBVYFObqLH1sWbabkkIkAJhnQKR6M6f+4/nlsH89ruyPbgwcM8/ns/ceEWtL3OGt91NCrnmpiUpE2wjZWMuv6vIzDhJlUrG6SCG+glzUyh+Th+F9niY/jjGESzP7FtVbmBWHMUUICSDnzGos+k9EzV0EsbLSYn7JuCzE3KRd5W11VRVpRdzu6f6u2wHBdom2Oz8O3UPfkay/1abW+gmjB4TdI9fxtAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"github token4\",\n    \"title\": \"github token4\",\n    \"src\": \"/static/8cfceb98b796c3de9e190df137eb9c1e/29007/github-token4.png\",\n    \"srcSet\": [\"/static/8cfceb98b796c3de9e190df137eb9c1e/e17e5/github-token4.png 400w\", \"/static/8cfceb98b796c3de9e190df137eb9c1e/5a190/github-token4.png 800w\", \"/static/8cfceb98b796c3de9e190df137eb9c1e/29007/github-token4.png 1600w\", \"/static/8cfceb98b796c3de9e190df137eb9c1e/7970d/github-token4.png 1908w\"],\n    \"sizes\": \"(max-width: 1600px) 100vw, 1600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"This name is what has to be provided as a value of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"NODE_AUTH_TOKEN\"), \" variable in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"env\"), \" section of\\nthe \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm publish\"), \" command.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"NODE_AUTH_TOKEN: ${{secrets.npm_token}}\"))), mdx(\"p\", null, \"Voil\\xE0! Now I have the npm package automatically published every time the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"master\"), \" branch is updated.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1600px\",\n      \"width\": \"100%\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2dc8cc537feb50d565fac60ce2930567/16529/github-workflow.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"41.75000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVQY021RS07DMBDN/U8AW+5QiQ3ds+MEqAtEmtRpEv9nPOPwnIoFLU8jb/x+HnecY+G0bRsX3Wpd8xayMDMRpZTTX4CmtVrnQgiq2h3ezdPh6+U4Pr+e3z4W5+M0W+A6z2AXkbKDd9QdxCwiMOrOM58GOg35s0/jwt5ZM03X64wz7lGPaHqilnx3YX1YrE+ZQyJM5tKGCnEJkXzMPiQfEzi47WrdbqO1iUOI/Xm4XKZxNNY6boUL1pFZRbSIwmW1LsNPHpLxMJQ2ZlrWFbVjRDqx1Mz1RkBb530pgvL3Ysp5GMbvvodYVLEq7IaKJmp/AUBs92TVf8TUOhvjQyBikNBFtCLpN7l6H+AIox9EB8+o9VUwCQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"github workflow\",\n    \"title\": \"github workflow\",\n    \"src\": \"/static/2dc8cc537feb50d565fac60ce2930567/29007/github-workflow.png\",\n    \"srcSet\": [\"/static/2dc8cc537feb50d565fac60ce2930567/e17e5/github-workflow.png 400w\", \"/static/2dc8cc537feb50d565fac60ce2930567/5a190/github-workflow.png 800w\", \"/static/2dc8cc537feb50d565fac60ce2930567/29007/github-workflow.png 1600w\", \"/static/2dc8cc537feb50d565fac60ce2930567/97a96/github-workflow.png 2400w\", \"/static/2dc8cc537feb50d565fac60ce2930567/16529/github-workflow.png 2506w\"],\n    \"sizes\": \"(max-width: 1600px) 100vw, 1600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"readingTime":{"minutes":2.35},"slug":"blog/release-to-npm-with-github-actions/","disqusIdentifier":"blog-release-to-npm-with-github-actions"},"frontmatter":{"title":"Automatic releases of npm packages with GitHub actions","subTitle":null,"date":"17 August 2020","v2":null,"old":null,"tumblr":null,"tags":null,"meta":{"desc":"How to tune GitHub workflows for automatic releases of an npm package. The npm publish can be run on every change to the master branch keeping your npm package up-to-date with its repository.\n"},"canonical":null,"cover":{"childImageSharp":{"fluid":{"src":"/static/83dfc8224dc5a9215da6264dd62ac021/f3583/thumb.png"}}}}},"site":{"siteMetadata":{"siteUrl":"https://varya.me"}}},"pageContext":{"slug":"blog/release-to-npm-with-github-actions/","prev":{"id":"64ec2207-171b-5679-838d-f67ec19a1ded","fileAbsolutePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/stories-with-different-viewports/index.md","fields":{"slug":"blog/stories-with-different-viewports/","disqusIdentifier":"blog-stories-with-different-viewports","level":1,"fileRelativePath":"stories-with-different-viewports/index.md","lang":"en"},"frontmatter":{"title":"Generic Storybook stories with different viewports","subTitle":null,"link":null,"v2":null,"old":null,"date":"2020-08-12T00:00:00.000Z","layout":"post","tags":"storybook"}},"next":{"id":"9ae08b64-48c9-5555-98c6-352415aef98c","fileAbsolutePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/design-tokens-and-components/index.md","fields":{"slug":"blog/design-tokens-and-components/","disqusIdentifier":"blog-design-tokens-and-components","level":1,"fileRelativePath":"design-tokens-and-components/index.md","lang":"en"},"frontmatter":{"title":"The context dilemma: design tokens and components\n","subTitle":null,"link":null,"v2":null,"old":null,"date":"2021-01-15T00:00:00.000Z","layout":null,"tags":null}},"fileSourceUrl":"https://github.com/varya/varya.github.com/edit/develop/content/posts/release-to-npm-with-github-actions/index.md"}},"staticQueryHashes":[]}