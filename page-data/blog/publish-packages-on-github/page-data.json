{"componentChunkName":"component---src-templates-post-js","path":"/blog/publish-packages-on-github/","result":{"data":{"mdx":{"id":"56dc2142-b21b-5f31-9fb2-78e2f36de2a7","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"GitHub package — way to go for your private npm packages\",\n  \"date\": \"2022-08-03T00:00:00.000Z\",\n  \"cover\": \"storage.jpg\",\n  \"meta\": {\n    \"desc\": \"Step-by-step guide on how to use a free GitHub package registry to store private npm packages (often needed for he design systems). The article shows how to set up an automatic workflow for publishing and how to get the packages in use.\\n\"\n  }\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"div\", {\n    \"data-excerpt\": true\n  }, mdx(\"p\", null, \"Often happens that an npm package should be published to a secure registry. In many cases, organizations have their own and all the internal stuff goes there. But what to do if your oranization does not have anything like that? Apparently, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.github.com/en/packages\"\n  }, \"Github Packages\"), \" are the way to go. In case your repository is private, its packages will be too! Below, I describe a simple workflow that I set today.\")), mdx(\"p\", null, \"In this case, the packages are built and published in a pipeline operated by \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/features/actions\"\n  }, \"Github Actions\"), \". To set a workflow there, you would need to create a YAML file in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".github/workflows/\"), \" folder. This is mine, for a package called \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@yourscope/design-library\"), \".\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"name: Release library\\n\\non:\\n  push:\\n    branches:\\n      - main\\n  workflow_dispatch:\\n\\njobs:\\n  deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v3\\n\\n      - name: Install NodeJS\\n        uses: actions/setup-node@v3\\n        with:\\n          node-version: \\\"16\\\"\\n          registry-url: \\\"https://npm.pkg.github.com\\\"\\n          scope: \\\"@yourscope\\\"\\n\\n      ### Check in, install, and build as your project needs it\\n\\n      - name: Release package\\n        run: |\\n          npm publish\\n        env:\\n          NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\"))), mdx(\"p\", null, \"Note that when publishing, there should be the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"NODE_AUTH_TOKEN\"), \" environmental variable available. However, its value is \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GITHUB_TOKEN\"), \" taken from secrets. You don't need to generate such a secret, your repository already has it in the background.\"), mdx(\"p\", null, \"Another thing to spot is that when installing Node, you should define the npm registry and the scope. That can be done with additional parameters as shown in the code example.\"), mdx(\"h2\", {\n    \"id\": \"how-to-release\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#how-to-release\",\n    \"aria-label\": \"how to release permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"How to release?\"), mdx(\"p\", null, \"Releases are happening in a pipeline via GitHub Actions once the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"main\"), \" branch is updated. Releases are successful if the version number is unique. Practically, that means that a design-system developer needs to change the version number to trigger the release. There is room for improvement \\u2014 it would be much nicer not to run the publishing job if the package of such a version already exists.\"), mdx(\"h2\", {\n    \"id\": \"how-to-get-the-package\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#how-to-get-the-package\",\n    \"aria-label\": \"how to get the package permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"How to get the package?\"), mdx(\"h3\", {\n    \"id\": \"authentification-at-github-packages\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#authentification-at-github-packages\",\n    \"aria-label\": \"authentification at github packages permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Authentification at GitHub Packages\"), mdx(\"p\", null, \"The GitHub Package registry is not open, you should get an access to it. For that, you need to authenticate.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create your \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Personal Access Token\"), \" at GitHub here \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/settings/tokens\"\n  }, \"https://github.com/settings/tokens\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It's a good habit to have a separate token for each project\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Name it using the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Note\"), \" field so that later you understand what the token is for\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The token should at least have \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"read:packages\"), \" permission\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Do not forget to copy the token after you have it generated\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Login to the npm registry:\", mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"npm login --scope=@yourscope --registry=https://npm.pkg.github.com\\n> Username: USERNAME\\n> Password: TOKEN\\n> Email: PUBLIC-EMAIL-ADDRESS\"))))), mdx(\"p\", null, \"For more information, follow the official GitHub documentation: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-with-a-personal-access-token\"\n  }, \"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-with-a-personal-access-token\")), mdx(\"h3\", {\n    \"id\": \"installing-the-design-system-package-at-the-very-first-time\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#installing-the-design-system-package-at-the-very-first-time\",\n    \"aria-label\": \"installing the design system package at the very first time permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Installing the design-system package at the very first time\"), mdx(\"p\", null, \"Before installation, you need to communicate that \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@yourscope\"), \" npm packages should\\nbe taken from GitHub Packages. You can do it by adding an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".npmrc\"), \" file to the root of your project. The content of the file should be as the following:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"@yourscope:registry=https://npm.pkg.github.com\"))), mdx(\"p\", null, \"Keep the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".npmrc\"), \" file under version control so that your colleagues also could get the packages from the right place.\"), mdx(\"p\", null, \"Now, you can install the package:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"npm install --save @yourscope/design-system\"))), mdx(\"p\", null, \"or\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"yarn add @yourscope/design-system\"))), mdx(\"h3\", {\n    \"id\": \"installing-project-dependencies\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#installing-project-dependencies\",\n    \"aria-label\": \"installing project dependencies permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Installing project dependencies\"), mdx(\"p\", null, \"If you have a project with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@yourscope/design-system\"), \" as a dependency, when being authorized, you should be able to install it together with all the other dependencies:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"npm install\"))), mdx(\"p\", null, \"or\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"yarn\"))));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"readingTime":{"minutes":3.125},"slug":"blog/publish-packages-on-github/","disqusIdentifier":"blog-publish-packages-on-github"},"frontmatter":{"title":"GitHub package — way to go for your private npm packages","subTitle":null,"date":"03 August 2022","v2":null,"old":null,"tumblr":null,"tags":null,"meta":{"desc":"Step-by-step guide on how to use a free GitHub package registry to store private npm packages (often needed for he design systems). The article shows how to set up an automatic workflow for publishing and how to get the packages in use.\n"},"canonical":null,"cover":{"childImageSharp":{"fluid":{"src":"/static/597e8fb61204ff6aed90e726fab7adcc/47498/storage.jpg"}}}}},"site":{"siteMetadata":{"siteUrl":"https://varya.me"}}},"pageContext":{"slug":"blog/publish-packages-on-github/","prev":{"id":"b9a72261-6027-5ef6-b89d-cc4840df585d","fileAbsolutePath":"/home/runner/work/varya.github.com/varya.github.com/content/posts/shared-project-vision/index.md","fields":{"slug":"blog/shared-project-vision/","disqusIdentifier":"blog-shared-project-vision","level":1,"fileRelativePath":"shared-project-vision/index.md","lang":"en"},"frontmatter":{"title":"Shared project vision — a series of exercises for teams","subTitle":null,"link":null,"v2":null,"old":null,"date":"2021-10-07T00:00:00.000Z","layout":null,"tags":null}},"fileSourceUrl":"https://github.com/varya/varya.github.com/edit/develop/content/posts/publish-packages-on-github/index.md"}},"staticQueryHashes":[]}