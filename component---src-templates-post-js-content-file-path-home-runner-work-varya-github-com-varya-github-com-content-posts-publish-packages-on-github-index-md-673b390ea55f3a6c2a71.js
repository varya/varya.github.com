"use strict";(self.webpackChunkvarya_me=self.webpackChunkvarya_me||[]).push([[7208],{2576:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var n=a(4552),l=a(1504);function r(e){const t=Object.assign({p:"p",a:"a",span:"span",h2:"h2",h3:"h3",ol:"ol",li:"li",em:"em",ul:"ul"},(0,n.MN)(),e.components);return l.createElement(l.Fragment,null,l.createElement("div",{"data-excerpt":!0},l.createElement(t.p,null,"Often happens that an npm package should be published to a secure registry. In many cases, organizations have their own and all the internal stuff goes there. But what to do if your organization does not have anything like that? Apparently, ",l.createElement(t.a,{href:"https://docs.github.com/en/packages"},"Github Packages")," are the way to go. In case your repository is private, its packages will be too! Below, I describe a simple workflow that I set today.")),"\n",l.createElement(t.p,null,"In this case, the packages are built and published in a pipeline operated by ",l.createElement(t.a,{href:"https://github.com/features/actions"},"Github Actions"),". To set a workflow there, you would need to create a YAML file in the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.github/workflows/</code>'}})," folder. This is mine, for a package called ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">@yourscope/design-library</code>'}}),"."),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">name: Release library\n\non:\n  push:\n    branches:\n      - main\n  workflow_dispatch:\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v3\n\n      - name: Install NodeJS\n        uses: actions/setup-node@v3\n        with:\n          node-version: "16"\n          registry-url: "https://npm.pkg.github.com"\n          scope: "@yourscope"\n\n      ### Check in, install, and build as your project needs it\n\n      - name: Release package\n        run: |\n          npm publish\n        env:\n          NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}</code></pre></div>'}}),"\n",l.createElement(t.p,null,"Note that when publishing, there should be the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">NODE_AUTH_TOKEN</code>'}})," environmental variable available. However, its value is ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">GITHUB_TOKEN</code>'}})," taken from secrets. You don't need to generate such a secret, your repository already has it in the background."),"\n",l.createElement(t.p,null,"Another thing to spot is that when installing Node, you should define the npm registry and the scope. That can be done with additional parameters as shown in the code example."),"\n",l.createElement(t.h2,{id:"how-to-release",style:{position:"relative"}},l.createElement(t.a,{href:"#how-to-release","aria-label":"how to release permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"How to release?"),"\n",l.createElement(t.p,null,"Releases are happening in a pipeline via GitHub Actions once the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">main</code>'}})," branch is updated. Releases are successful if the version number is unique. Practically, that means that a design-system developer needs to change the version number to trigger the release. There is room for improvement â€” it would be much nicer not to run the publishing job if the package of such a version already exists."),"\n",l.createElement(t.h2,{id:"how-to-get-the-package",style:{position:"relative"}},l.createElement(t.a,{href:"#how-to-get-the-package","aria-label":"how to get the package permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"How to get the package?"),"\n",l.createElement(t.h3,{id:"authentification-at-github-packages",style:{position:"relative"}},l.createElement(t.a,{href:"#authentification-at-github-packages","aria-label":"authentification at github packages permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Authentification at GitHub Packages"),"\n",l.createElement(t.p,null,"The GitHub Package registry is not open, you should get an access to it. For that, you need to authenticate."),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Create your ",l.createElement(t.em,null,"Personal Access Token")," at GitHub here ",l.createElement(t.a,{href:"https://github.com/settings/tokens"},"https://github.com/settings/tokens"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"It's a good habit to have a separate token for each project"),"\n",l.createElement(t.li,null,"Name it using the ",l.createElement(t.em,null,"Note")," field so that later you understand what the token is for"),"\n",l.createElement(t.li,null,"The token should at least have ",l.createElement(t.em,null,"read:packages")," permission"),"\n",l.createElement(t.li,null,"Do not forget to copy the token after you have it generated"),"\n"),"\n"),"\n",l.createElement(t.li,null,"Login to the npm registry:","\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm login --scope=@yourscope --registry=https://npm.pkg.github.com\n> Username: USERNAME\n> Password: TOKEN\n> Email: PUBLIC-EMAIL-ADDRESS</code></pre></div>'}}),"\n"),"\n"),"\n",l.createElement(t.p,null,"For more information, follow the official GitHub documentation: ",l.createElement(t.a,{href:"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-with-a-personal-access-token"},"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-with-a-personal-access-token")),"\n",l.createElement(t.h3,{id:"installing-the-design-system-package-at-the-very-first-time",style:{position:"relative"}},l.createElement(t.a,{href:"#installing-the-design-system-package-at-the-very-first-time","aria-label":"installing the design system package at the very first time permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Installing the design-system package at the very first time"),"\n",l.createElement(t.p,null,"Before installation, you need to communicate that ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">@yourscope</code>'}})," npm packages should\nbe taken from GitHub Packages. You can do it by adding an ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.npmrc</code>'}})," file to the root of your project. The content of the file should be as the following:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">@yourscope:registry=https://npm.pkg.github.com</code></pre></div>'}}),"\n",l.createElement(t.p,null,"Keep the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.npmrc</code>'}})," file under version control so that your colleagues also could get the packages from the right place."),"\n",l.createElement(t.p,null,"Now, you can install the package:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install --save @yourscope/design-system</code></pre></div>'}}),"\n",l.createElement(t.p,null,"or"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn add @yourscope/design-system</code></pre></div>'}}),"\n",l.createElement(t.h3,{id:"installing-project-dependencies",style:{position:"relative"}},l.createElement(t.a,{href:"#installing-project-dependencies","aria-label":"installing project dependencies permalink",className:"anchor before"},l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Installing project dependencies"),"\n",l.createElement(t.p,null,"If you have a project with ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">@yourscope/design-system</code>'}})," as a dependency, when being authorized, you should be able to install it together with all the other dependencies:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install</code></pre></div>'}}),"\n",l.createElement(t.p,null,"or"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn</code></pre></div>'}}))}var s=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.MN)(),e.components);return t?l.createElement(t,e,l.createElement(r,e)):r(e)},i=a(3268),o=a.n(i),c=a(8164),h=a(5864),g=a(4388),u=a(7264),d=a(7768);const m={Box:c.k,Button:h.q,Text:g.a,Heading:u._m,Paragraph:u.gZ,PatternJourney:u.cR,PureHtml:u.Sc,Section:u.iG,Hero:u.Ax,Widget:u.MF,PatternJourney:u.cR,WidgetContainer:u.gV,Workshop:u.yw,ProjectRoles:u.Ij,DsAspects:u.gN,Link:u.cH,Image:u.WC,ImageBlock:u.uD},p=e=>t=>{let{children:a}=t;return l.createElement(u._m,{level:e},a)},y={h1:p(1),h2:p(2),h3:p(3),h4:p(4),h5:p(5),h6:p(6),p:e=>{let{children:t}=e;return l.createElement(u.gZ,{standout:!0},t)},a:u.cH,div:e=>{let{"data-excerpt":t,children:a,...n}=e;return t?l.createElement(u.gZ,{as:"div",lead:!0},a):l.createElement("div",n,a)}};y.h1.propTypes={children:o().node};const f=e=>{let{data:{mdx:t,site:{siteMetadata:{siteUrl:a}}},children:r,pageContext:{next:s,prev:i,fileSourceUrl:o}}=e;const{readingTime:h,slug:g,disqusIdentifier:p}=t.fields,{date:f,title:v,subTitle:E,cover:b,tumblr:k}=t.frontmatter,w=t.frontmatter.tags&&t.frontmatter.tags.split(","),x=g.startsWith("blog/");return t?l.createElement(u._W,null,l.createElement(u.my,{imageUrl:b&&b.childImageSharp.gatsbyImageData.images.fallback.src,tags:w,date:f,readingTime:x&&parseInt(h.minutes)>0?Math.round(h.minutes).toFixed(1)+" min read":null,title:v,subTitle:E}),l.createElement(u.yc,{data:t}),l.createElement(c.k,{flex:"grow",width:"xlarge",margin:{horizontal:"auto"},pad:"medium",direction:"column"},l.createElement(n.Iu,{components:{...y,...m}},r),l.createElement(c.k,{direction:"row",fill:"horizontal",justify:"center",margin:{bottom:"auto"},pad:{vertical:"medium"}},w&&w.length>0&&w.map((e=>l.createElement(u.ED,{key:e,name:e.trim(),slug:(0,d.MZ)(e),margin:"xsmall"})))),x&&l.createElement(l.Fragment,null,l.createElement(u.uU,{flex:!1,prevSlug:i&&"/"+i.fields.slug,nextSlug:s&&"/"+s.fields.slug,prevTitle:i&&i.frontmatter.title,nextTitle:s&&s.frontmatter.title,pad:{vertical:"medium"}}),l.createElement(u.Oc,{link:o}),l.createElement(u.QZ,{slug:g,title:v,disqusIdentifier:p,tumblr:k,siteUrl:a})))):null};function v(e){return l.createElement(f,e,l.createElement(s,e))}},4552:function(e,t,a){a.d(t,{Iu:function(){return i},MN:function(){return r}});var n=a(1504);const l=n.createContext({});function r(e){const t=n.useContext(l);return n.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const s={};function i({components:e,children:t,disableParentContext:a}){let i;return i=a?"function"==typeof e?e({}):e||s:r(e),n.createElement(l.Provider,{value:i},t)}}}]);
//# sourceMappingURL=component---src-templates-post-js-content-file-path-home-runner-work-varya-github-com-varya-github-com-content-posts-publish-packages-on-github-index-md-673b390ea55f3a6c2a71.js.map